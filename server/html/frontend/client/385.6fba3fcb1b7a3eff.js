"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[385],{9385:(b,c,u)=>{u.r(c),u.d(c,{RequestsPageModule:()=>A});var i=u(9808),g=u(1816),l=u(2340),e=u(1223),h=u(2290),q=u(7562),d=u(9854),a=u(1196);function _(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().delete_request(o.id)}),e._uU(1,"\n                            "),e._UZ(2,"i",14),e._uU(3,"\n                        "),e.qZA()}}const p=function(){return["/request-viewer"]},U=function(s){return{id:s}};function Z(s,r){if(1&s&&(e.TgZ(0,"tr"),e._uU(1,"\n                "),e.TgZ(2,"th",8),e._uU(3),e.qZA(),e._uU(4,"\n                "),e.TgZ(5,"td"),e._uU(6),e.qZA(),e._uU(7,"\n                "),e.TgZ(8,"td"),e._uU(9),e.qZA(),e._uU(10,"\n                "),e.TgZ(11,"td"),e._uU(12),e.qZA(),e._uU(13,"\n                "),e.TgZ(14,"td"),e._uU(15),e.qZA(),e._uU(16,"\n                "),e.TgZ(17,"td"),e._uU(18,"\n                    "),e.TgZ(19,"div",9),e._uU(20,"\n                        "),e.TgZ(21,"a",10),e._uU(22,"\n                            "),e._UZ(23,"i",11),e._uU(24,"\n                        "),e.qZA(),e._uU(25,"\n                        "),e.YNc(26,_,4,0,"button",12),e._uU(27,"\n                    "),e.qZA(),e._uU(28,"\n                "),e.qZA(),e._uU(29,"\n            "),e.qZA()),2&s){const t=r.$implicit,n=e.oxw();e.xp6(3),e.Oqu(t.id),e.xp6(3),e.Oqu(t.student_name),e.xp6(3),e.Oqu(t.career_name),e.xp6(3),e.Oqu(n.request_types[t.request_type-1].name),e.xp6(3),e.Oqu(n.request_statuses[t.request_status-1].name),e.xp6(6),e.Q6J("routerLink",e.DdM(8,p))("queryParams",e.VKq(9,U,t.id)),e.xp6(5),e.Q6J("ngIf",1==n.user.role)}}const m=[{path:"",component:(()=>{class s{constructor(t,n,o){this.toastr=t,this.spinner=n,this.requestDataService=o,this.user={},this.requests=[],this.request_types=l.N.request_types,this.request_statuses=l.N.request_statuses}ngOnInit(){const t=sessionStorage.getItem("token");this.user=(0,g.Z)(t),this.refresh()}refresh(){this.get_requests()}get_requests(){this.spinner.show(),this.requests=[],1==this.user.role||4==this.user.role?this.requestDataService.get().then(t=>{this.spinner.hide(),this.requests=t}).catch(t=>{console.log(t)}):3==this.user.role?this.requestDataService.getByDirector(this.user.sub).then(t=>{this.spinner.hide(),this.requests=t}).catch(t=>{console.log(t)}):2==this.user.role&&this.requestDataService.getByDean(this.user.sub).then(t=>{this.spinner.hide(),this.requests=t}).catch(t=>{console.log(t)})}delete_request(t){this.spinner.show(),this.requests=[],this.requestDataService.delete(t).then(n=>{this.spinner.hide(),this.toastr.success("Solciitud eliminada correctamente.","Solciitud Eliminada"),this.refresh()}).catch(n=>{console.log(n)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h._W),e.Y36(q.t2),e.Y36(d.s))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-requests-page"]],decls:43,vars:1,consts:[[1,"display-5","mb-5"],[1,"table-responsive","mb-5"],[1,"table","table-bordered","table-hover"],[1,"table-light"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","mb-5",3,"click"],[1,"fas","fa-redo"],["scope","row"],[1,"d-grid","gap-2","d-md-block"],[1,"btn","btn-primary",3,"routerLink","queryParams"],[1,"fas","fa-eye"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Todas las Solicitudes"),e.qZA(),e._uU(2,"\n"),e.TgZ(3,"div",1),e._uU(4,"\n    "),e.TgZ(5,"table",2),e._uU(6,"\n        "),e.TgZ(7,"thead",3),e._uU(8,"\n            "),e.TgZ(9,"tr"),e._uU(10,"\n                "),e.TgZ(11,"th",4),e._uU(12,"ID"),e.qZA(),e._uU(13,"\n                "),e.TgZ(14,"th",4),e._uU(15,"Estudiante"),e.qZA(),e._uU(16,"\n                "),e.TgZ(17,"th",4),e._uU(18,"Carrera"),e.qZA(),e._uU(19,"\n                "),e.TgZ(20,"th",4),e._uU(21,"Tipo"),e.qZA(),e._uU(22,"\n                "),e.TgZ(23,"th",4),e._uU(24,"Status"),e.qZA(),e._uU(25,"\n                "),e.TgZ(26,"th",4),e._uU(27,"Acciones"),e.qZA(),e._uU(28,"\n            "),e.qZA(),e._uU(29,"\n        "),e.qZA(),e._uU(30,"\n        "),e.TgZ(31,"tbody"),e._uU(32,"\n            "),e.YNc(33,Z,30,11,"tr",5),e._uU(34,"\n        "),e.qZA(),e._uU(35,"\n    "),e.qZA(),e._uU(36,"\n"),e.qZA(),e._uU(37,"\n"),e.TgZ(38,"button",6),e.NdJ("click",function(){return n.refresh()}),e._uU(39,"\n    "),e._UZ(40,"i",7),e._uU(41," Refrescar\n"),e.qZA(),e._uU(42,"\n")),2&t&&(e.xp6(33),e.Q6J("ngForOf",n.requests))},directives:[i.sg,a.yS,i.O5],styles:[""]}),s})()}];let f=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[a.Bz.forChild(m)],a.Bz]}),s})();var T=u(2382);let A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[],imports:[[i.ez,f,T.u5]]}),s})()}}]);