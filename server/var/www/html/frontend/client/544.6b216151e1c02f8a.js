"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[544],{3544:(v,c,o)=>{o.r(c),o.d(c,{ProfilePageModule:()=>U});var g=o(7556),d=o(9808),p=o(1816),e=o(1223),h=o(7562),m=o(3071),u=o(1196),f=o(2290),l=o(2382);const _=[{path:"",component:(()=>{class s{constructor(n,r,a,t){this.spinner=n,this.userDataService=r,this.router=a,this.toastr=t,this.user={},this.correo="",this.password_confirm="",this.new_password="",this.password_min_length=8,this.password_caracteres_numericos=!0,this.password_caracteres_especiales=!0,this.password_caracteres_mayusculas=!0,this.password_caracteres_minusculas=!0,this.errores=[]}ngOnInit(){this.reset(),this.correo=this.user.email}reset(){this.password_confirm="",this.new_password="";const n=sessionStorage.getItem("token");this.user=(0,p.Z)(n)}validate_email(){if(this.errores=[],""==this.user.email)return this.errores.push({title:"Correo Electr\xf3nico Incorrecto",message:"Debe ingresar un Correo Electr\xf3nico"}),!1;const n=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.user.email.toString());return n||this.errores.push({title:"Correo Electr\xf3nico Incorrecto",message:"Correo Electr\xf3nico no v\xe1lido."}),n}validate_password(){return this.new_password==this.password_confirm||(this.errores.push({title:"Contrase\xf1a Incorrecta",message:"Las contrase\xf1as no coinciden."}),!1)}save_profile(){return this.spinner.show(),this.validate_email(),this.validate_password(),this.errores.length>0?(this.spinner.hide(),void this.errores.forEach(n=>{this.toastr.error(n.message,n.title)})):this.user.email==this.correo&&""==this.new_password?(this.spinner.hide(),void this.toastr.info("Ning\xfan cambio realizado.","Info")):void this.userDataService.updateProfile(this.user.sub,this.user.email,this.new_password).then(n=>{this.spinner.hide(),this.toastr.success(n.message,"Perfil Actualizado"),sessionStorage.clear(),this.router.navigate(["/login"])}).catch(n=>{console.log(n)})}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.t2),e.Y36(m.K),e.Y36(u.F0),e.Y36(f._W))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile-page"]],decls:85,vars:7,consts:[[1,"display-5","mb-5"],[1,"row","d-flex","mb-5"],[1,"col-lg-2","col-md-12","mb-lg-0","mb-5"],["src","assets/img/dashboard/avatar.svg","width","100",1,"img-fluid"],[1,"col-lg-10","col-md-12"],[1,"lead","mb-0"],[1,"fas","fa-fingerprint"],[1,"lead"],[1,"fas","fa-envelope"],[1,"col-lg-6","col-md-12","mb-lg-0","mb-5"],[1,"mb-5"],[1,"fas","fa-address-card"],[1,"form-label"],[1,"form-control"],["type","email",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-6","col-md-12"],[1,"fas","fa-lock"],["type","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-save"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-ban"]],template:function(n,r){1&n&&(e.TgZ(0,"h1",0),e._uU(1,"Mi perfil"),e.qZA(),e._uU(2,"\n"),e.TgZ(3,"div",1),e._uU(4,"\n  "),e.TgZ(5,"div",2),e._uU(6,"\n    "),e._UZ(7,"img",3),e._uU(8,"\n  "),e.qZA(),e._uU(9,"\n  "),e.TgZ(10,"div",4),e._uU(11,"\n    "),e.TgZ(12,"h3"),e._uU(13),e.qZA(),e._uU(14,"\n    "),e.TgZ(15,"p",5),e._UZ(16,"i",6),e._uU(17),e.qZA(),e._uU(18,"\n    "),e.TgZ(19,"p",7),e._UZ(20,"i",8),e._uU(21),e.qZA(),e._uU(22,"\n  "),e.qZA(),e._uU(23,"\n"),e.qZA(),e._uU(24,"\n"),e.TgZ(25,"div",1),e._uU(26,"\n  "),e.TgZ(27,"div",9),e._uU(28,"\n    "),e.TgZ(29,"h2",10),e._UZ(30,"i",11),e._uU(31," Datos personales"),e.qZA(),e._uU(32,"\n    "),e.TgZ(33,"div",10),e._uU(34,"\n      "),e.TgZ(35,"label",12),e._uU(36,"Nombre"),e.qZA(),e._uU(37,"\n      "),e.TgZ(38,"label",13),e._uU(39),e.qZA(),e._uU(40,"\n    "),e.qZA(),e._uU(41,"\n    "),e.TgZ(42,"div",10),e._uU(43,"\n      "),e.TgZ(44,"label",12),e._uU(45,"Correo electr\xf3nico"),e.qZA(),e._uU(46,"\n      "),e.TgZ(47,"input",14),e.NdJ("ngModelChange",function(t){return r.user.email=t}),e.qZA(),e._uU(48,"\n    "),e.qZA(),e._uU(49,"\n  "),e.qZA(),e._uU(50,"\n  "),e.TgZ(51,"div",15),e._uU(52,"\n    "),e.TgZ(53,"h2",10),e._UZ(54,"i",16),e._uU(55," Seguridad"),e.qZA(),e._uU(56,"\n    "),e.TgZ(57,"div",10),e._uU(58,"\n      "),e.TgZ(59,"label",12),e._uU(60,"Nueva contrase\xf1a"),e.qZA(),e._uU(61,"\n      "),e.TgZ(62,"input",17),e.NdJ("ngModelChange",function(t){return r.new_password=t}),e.qZA(),e._uU(63,"\n    "),e.qZA(),e._uU(64,"\n    "),e.TgZ(65,"div",10),e._uU(66,"\n      "),e.TgZ(67,"label",12),e._uU(68,"Repetir nueva contrase\xf1a"),e.qZA(),e._uU(69,"\n      "),e.TgZ(70,"input",17),e.NdJ("ngModelChange",function(t){return r.password_confirm=t}),e.qZA(),e._uU(71,"\n    "),e.qZA(),e._uU(72,"\n  "),e.qZA(),e._uU(73,"\n  "),e.TgZ(74,"div"),e._uU(75,"\n    "),e.TgZ(76,"button",18),e.NdJ("click",function(){return r.save_profile()}),e._UZ(77,"i",19),e._uU(78," Guardar cambios"),e.qZA(),e._uU(79,"\n    "),e.TgZ(80,"button",20),e.NdJ("click",function(){return r.reset()}),e._UZ(81,"i",21),e._uU(82," Cancelar"),e.qZA(),e._uU(83,"\n  "),e.qZA(),e._uU(84,"\n"),e.qZA()),2&n&&(e.xp6(13),e.Oqu(r.user.name),e.xp6(4),e.hij(" ",r.user.identification,""),e.xp6(4),e.hij(" ",r.correo,""),e.xp6(18),e.Oqu(r.user.name),e.xp6(8),e.Q6J("ngModel",r.user.email),e.xp6(15),e.Q6J("ngModel",r.new_password),e.xp6(8),e.Q6J("ngModel",r.password_confirm))},directives:[l.Fj,l.JJ,l.On],styles:[""]}),s})()}];let Z=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[u.Bz.forChild(_)],u.Bz]}),s})(),U=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[g.e],imports:[[d.ez,Z,l.u5]]}),s})()}}]);